(window.webpackJsonp=window.webpackJsonp||[]).push([["PagePesanan"],{TgWd:function(n,a,e){"use strict";var t=e("pVnL"),c=e.n(t),r=e("q1tI"),o=e.n(r),s=e("SUMQ"),i=e("55Ip"),l=(e("17x9"),e("1OZW")),u=e.n(l),p=e("NABS"),d=e.n(p),h=e("zOyN"),m=e.n(h),f=e("4eE1"),g=e.n(f),_=e("qJ/b"),k=e.n(_),b=e("DbWf"),E=e.n(b),S=e("oVZy"),y=e.n(S),w=e("MPUk"),v=e.n(w),P=e("FrwU"),D=e.n(P),N=e("ZPUd"),C=e.n(N);a.a=Object(s.withStyles)(function(n){return{inline:{display:"inline"},chip:{margin:n.spacing.unit},button:{margin:n.spacing.unit}}},{withTheme:!0})(function(n){var a=c()({},n),e=a.classes,t=a.item;return o.a.createElement(d.a,{alignItems:"flex-start"},o.a.createElement(m.a,null,"makanan"===t.jenis_menu?o.a.createElement(y.a,null):o.a.createElement(E.a,null)),o.a.createElement(g.a,{primary:o.a.createElement(o.a.Fragment,null,t.nomor_pesanan),secondary:o.a.createElement(o.a.Fragment,null,o.a.createElement("b",null,"Nomor Meja:")," ",t.nomor_meja,o.a.createElement("br",null),o.a.createElement("b",null,"Nama Pelanggan:")," ",t.nama_pelanggan,o.a.createElement("br",null),o.a.createElement("b",null,"Total Harga:")," ",t.total_harga)}),o.a.createElement(k.a,{label:t.status_pesanan,className:e.chip,variant:"outlined"}),"pesanan"===a.url?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.b,{to:"/pesanan/edit/".concat(t.id)},o.a.createElement(u.a,{variant:"contained",color:"primary",className:e.button},o.a.createElement(v.a,null))),o.a.createElement(u.a,{variant:"contained",color:"secondary",className:e.button,onClick:a.handleDeletePesanan},o.a.createElement(D.a,null)),"kasir"===a.role?o.a.createElement(u.a,{variant:"contained",color:"primary",className:e.button,onClick:a.handleClosePesanan},o.a.createElement(C.a,null)):o.a.createElement("div",null)):o.a.createElement("div",null))})},mAsH:function(n,a,e){"use strict";e.r(a);var t=e("lwsE"),c=e.n(t),r=e("W8MJ"),o=e.n(r),s=e("a1gu"),i=e.n(s),l=e("Nsbk"),u=e.n(l),p=e("PJYZ"),d=e.n(p),h=e("7W2i"),m=e.n(h),f=e("lSNA"),g=e.n(f),_=e("q1tI"),k=e.n(_),b=e("/MKj"),E=e("XfWh"),S=e.n(E),y=e("SUMQ"),w=e("55Ip"),v=e("1OZW"),P=e.n(v),D=e("JgXy"),N=e.n(D),C=e("3ZzI"),O=e.n(C),j=e("6ZaM"),F=e.n(j),M=e("EHL7"),q=e.n(M),W=e("3hiT"),A=e.n(W),J=e("aetC"),T=e("TgWd"),Z=e("uAhS"),I=e("+sgJ"),L=function(n){function a(){var n,e;c()(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=i()(this,(n=u()(a)).call.apply(n,[this].concat(r))),g()(d()(e),"state",{message:"",isSnackbarOpen:!1}),g()(d()(e),"handleSnackbarShow",function(n){e.setState({isSnackbarOpen:!0,message:n}),setTimeout(function(){this.setState({isSnackbarOpen:!1,message:""})}.bind(d()(e)),6e3)}),g()(d()(e),"handleDeletePesanan",function(n,a){var t=e.props.authentication;e.props.delete_pesanan(t.token,n).then(function(){e.handleSnackbarShow("Delete Pesanan Success")}).then(function(){var c="Delete Pesanan ".concat(n,"-").concat(a);e.props.create_log(t.token,t,c)}).then(function(){e.props.get_list_pesanan(t.token)}).catch(function(n){e.handleSnackbarShow("Delete Pesanan Failed with error message: ".concat(n.message))})}),g()(d()(e),"handleClosePesanan",function(n,a){e.props.close_pesanan(n,a.id,a).then(function(){e.handleSnackbarShow("Close Pesanan Success")}).then(function(){var t="Close Pesanan ".concat(a.id,"-").concat(a.nama_pelanggan);e.props.create_log(n.token,n,t)}).then(function(){e.props.get_list_pesanan(n.token)}).catch(function(n){e.handleSnackbarShow("Close Pesanan Failed with error message: ".concat(n.message))})}),e}return m()(a,n),o()(a,[{key:"componentDidMount",value:function(){var n=this;this.props.get_list_pesanan(this.props.authentication.token).then(function(){console.log("Load list pesanan done")}).catch(function(a){n.handleSnackbarShow("Load Data Pesanan Failed with error message: ".concat(a.message))})}},{key:"render",value:function(){var n=this,a=this.props,e=a.classes,t=a.list_pesanan,c=a.authentication;return k.a.createElement(O.a,{container:!0,justify:"center"},k.a.createElement(O.a,{item:!0,xs:12},k.a.createElement(F.a,{variant:"h5",component:"h3"},"Page List Pesanan"),k.a.createElement(w.b,{to:"/pesanan/add"},k.a.createElement(P.a,{variant:"contained",color:"primary",className:e.button},k.a.createElement(A.a,null)," Add Pesanan")),k.a.createElement(N.a,{className:e.root},t.map(function(a,e){return k.a.createElement(k.a.Fragment,{key:e},k.a.createElement(T.a,{role:c.role,item:a,url:"pesanan",handleDeletePesanan:function(){n.handleDeletePesanan(a.id,a.nama_pelanggan)},handleClosePesanan:function(){n.handleClosePesanan(c,a)}}),k.a.createElement(q.a,{light:!0}))})),k.a.createElement(J.a,{place:"tr",icon:"add_alert",message:this.state.message||"add menu success",isSnackbarOpen:this.state.isSnackbarOpen,closeNotification:function(){return n.setState({isSnackbarOpen:!1})}})))}}]),a}(_.Component);a.default=S()(Object(y.withStyles)(function(n){return{root:{width:"100%",backgroundColor:n.palette.background.paper},inline:{display:"inline"},chip:{margin:n.spacing.unit},grow:{flexGrow:1},button:{margin:n.spacing.unit}}},{withTheme:!0}),Object(b.b)(function(n){return{authentication:n.login,status:n.layout,list_pesanan:n.pesanan.list_pesanan}},{get_list_pesanan:Z.e,delete_pesanan:Z.c,create_log:I.a,close_pesanan:Z.a}))(L)},uAhS:function(n,a,e){"use strict";e.d(a,"f",function(){return s}),e.d(a,"e",function(){return i}),e.d(a,"d",function(){return l}),e.d(a,"b",function(){return u}),e.d(a,"g",function(){return p}),e.d(a,"c",function(){return d}),e.d(a,"a",function(){return h});var t=e("FkkM"),c=e("vDqi"),r=e.n(c);function o(n){return n<10?"0"+n.toString():n.toString()}var s=function(n){return function(a){var e=new Date,c=o(e.getDate()),s=o(e.getMonth()+1),i=o(e.getFullYear()),l=e.toDateString();return r.a.get("http://localhost:3000/api"+"api/pesanans/count?filter[where][date_created]=".concat(l,"&access_token=").concat(n)).then(function(n){return a({type:t.q,payload:n.data}),n.data.count+1}).then(function(n){var a=function(n){return n<100?"00"+n.toString():n.toString()}(n);return"ERP".concat(c).concat(s).concat(i,"-").concat(a)}).catch(function(n){return n})}},i=function(n){return function(a){return r.a.get("http://localhost:3000/api"+"api/pesanans?filter[where][status_pesanan]=aktif&access_token=".concat(n)).then(function(n){return a({type:t.m,payload:n.data}),n.data})}},l=function(n,a){return function(e){return r.a.get("http://localhost:3000/api"+"api/pesanans/".concat(a,"?access_token=").concat(n)).then(function(n){return e({type:t.i,payload:n.data}),n.data})}},u=function(n,a){return function(e){return r.a.request({method:"post",url:"http://localhost:3000/api"+"api/pesanans?access_token=".concat(n),data:a}).then(function(n){return e({type:t.c,payload:n.data}),n.data})}},p=function(n,a,e){return function(c){return r.a.request({method:"put",url:"http://localhost:3000/api"+"api/pesanans/".concat(a,"?access_token=").concat(n),data:e}).then(function(n){return c({type:t.t,payload:n.data}),n.data})}},d=function(n,a){return function(e){return r.a.delete("http://localhost:3000/api"+"api/pesanans/".concat(a,"?access_token=").concat(n)).then(function(n){return e({type:t.e}),n.data})}},h=function(n,a,e){return function(c){var o=new Date,s={nama_pelanggan:e.nama_pelanggan,nomor_pesanan:e.nomor_pesanan,status_pesanan:"closed",nomor_meja:e.nomor_meja,total_harga:e.total_harga,daftar_pesanan:e.daftar_pesanan,id_kasir:n.id_account,id_pelayan:e.id_pelayan,date_created:e.date_created,date_update:o};return r.a.request({method:"put",url:"http://localhost:3000/api"+"api/pesanans/".concat(a,"?access_token=").concat(n.token),data:s}).then(function(n){return c({type:t.t,payload:n.data}),n.data})}}}}]);